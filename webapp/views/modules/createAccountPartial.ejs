<div class="container mb-3">
    <form class="row g-3 needs-validation" novalidate >

        <div class="d-block d-lg-flex justify-content-start">
            <div class="col-12 col-sm-10 col-sm-8 col-lg-5 me-lg-4">
                <label for="firstName" class="form-label">First Name</label>
                <input type="text" class="form-control" id="firstName" placeholder="First name" required>
                <div class="invalid-feedback">
                    Please provide a valid first name.
                </div>
            </div>

            <div class="col-12 col-sm-10 col-sm-8 col-lg-5 mt-3 mt-lg-0">
                <label for="lastName" class="form-label">Last Name</label>
                <input type="text" class="form-control" id="lastName" placeholder="Last name" required>
                <div class="invalid-feedback">
                    Please provide a valid last name.
                </div>
            </div>
        </div>

        <div class="d-block">
            <div class="col-12 col-sm-10 col-sm-8 col-lg-5 pe-0 me-md-2">
                <label for="username" class="form-label">Username</label>
                <div class="input-group has-validation">
                    <input type="text" class="form-control" id="username" placeholder="Username" required>
                    <div class="invalid-feedback">
                        Please choose a username.
                    </div>
                </div>
            </div>
        </div>
        
        <div class="d-block">
            <div class="col-12 col-sm-10 col-sm-8 col-lg-5 pe-0 me-md-2">
                <label for="email" class="form-label">Email Address</label>
                <input type="email" placeholder="example@domain.com" class="form-control" id="email" required>
                <div class="invalid-feedback">
                    Please provide a valid email.
                </div>
            </div>
        </div>

        <div class="d-block">
            <div class="col-12 col-sm-10 col-sm-8 col-lg-5 pe-0 me-md-2">
                <label for="confirmEmail" class="form-label">Confirm Email Address</label>
                <input type="email" placeholder="example@domain.com" class="form-control" id="confirmEmail"  required>
                <div class="invalid-feedback" id="confirmEmailInvalid">
                    
                </div>
            </div>
            
        </div>

        <div class="d-block">
            <div class="col-12 col-sm-10 col-sm-8 col-lg-5 pe-0 me-md-2">
                <label for="password" class="form-label">Password</label>
                <input type="password" placeholder="Password" class="form-control" id="password" minlength="8" maxlength="20" required>
                <small id="passwordHelpBlock" class="form-text text-muted">
                    Your password must be 8-20 characters long.
                </small>
                <div class="invalid-feedback">
                    Password must be between 8-20 characters long.
                </div>
            </div>
        </div>

        <div class="d-block">
            <div class="col-12 col-sm-10 col-sm-8 col-lg-5 pe-0 me-md-2">
                <label for="confirmPassword" class="form-label">Confirm Password</label>
                <input type="password" placeholder="Password" class="form-control" id="confirmPassword" minlength="8" maxlength="20"   required>
                <div class="invalid-feedback" id="confirmPasswordInvalid">
                    
                </div>
            </div>
        </div>

        <div class="col-12 col-sm-10 col-sm-8 col-lg-5 pt-4">
            <div class="row justify-content-start">
                <div class="col-auto">
                    <button class="btn actionBtn me-2" onclick= "validateFields()" type="submit">Create Account</button>
                    <a href="/" class="btn negativeActionBtn">Cancel</a>
                </div>
            </div>
        </div>
    </form>
</div>



<!-- Custom javascript functions -->
<script src="/js/formValueMatches.js"></script>

<script>

// Function that targets and applies additional checks on password and email fields
// Needed as could need figure out how to do it using bootstraps validaiton function and classes
const validateFields = () => {

    var passwordMatch = valueMatches('password', 'confirmPassword', 'confirmPasswordInvalid', 'Passwords do not match.');
    var emailMatch = valueMatches('email', 'confirmEmail', 'confirmEmailInvalid', 'Emails do not match.');

    return passwordMatch && emailMatch;
}

// Boilerplater code from Bootstrap
// Checks each form in the page and applies some check such as ensuring it is not empty if required and meets the min and max length requirements
    (function () {
        'use strict'

        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        var forms = document.querySelectorAll('.needs-validation')

        // Loop over them and prevent submission
        Array.prototype.slice.call(forms)
            .forEach(function (form) {
                form.addEventListener('submit', function (event) {
                    if (!form.checkValidity()) {
                        event.preventDefault()
                        event.stopPropagation()
                    }

                    form.classList.add('was-validated')
                }, false)
            })
    })()
</script>
